# ฺฏุฒุงุฑุด ุงููุช Merkl

ุงู ูุฎุฒู ุดุงูู ุฎูุงุตู ู ุชุญูู ฺฏุฒุงุฑุด ุงููุช **Merkl** ุงุณุช ฺฉู ุชูุณุท Code4rena ุฏุฑ ููุงูุจุฑ 2025 ุงูุฌุงู ุดุฏู ุงุณุช. ูุฏู ุงุฑุงุฆู ูฺฉุงุช ฺฉูุฏ ุฏุฑ ููุฑุฏ ุขุณุจโูพุฐุฑโูุงุ ุฏุฑุณโูุง ุขููุฎุชูโุดุฏู ู ุจูุชุฑู ุดููโูุง ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู ู ููุฒุงู Solidity ุงุณุช.

---

## ๐ ูุฑูุฑ ฺฉู

Merkl ฺฉ ูพุฑูฺู DeFi ุงุณุช ฺฉู ฺฉููพูโูุง ุชุดูู ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ูุฑุงุฑุฏุงุฏูุง ููุดููุฏ Solidity ูุฏุฑุช ูโฺฉูุฏ. ุงู ููุฒ ุดูุงุณุง ฺฉุฑุฏู ุงุณุช:

* **3 ุขุณุจโูพุฐุฑ ุจุง ุฑุณฺฉ ูุชูุณุท (Medium)**
* **0 ุขุณุจโูพุฐุฑ ุจุง ุฑุณฺฉ ุจุงูุง (High)**
* **58 ููุฑุฏ ฺฉูโุงููุช / ุงุทูุงุนุงุช (Low / Informational)**

ุชูุฑฺฉุฒ ุงู README ุจุฑ ุงูุชูโูุง Medium ู ูฺฉุงุช ุขููุฒุด ูุงุจู ุชูุฌู ุงุณุช.

---

## ๐งจ ุงูุชูโูุง ุจุง ุฑุณฺฉ ูุชูุณุท

### 1. ุงุนุชุจุงุฑุณูุฌ ููุฏุงุฑ ูพุงุฏุงุด ุจุฑ ุงุณุงุณ ูุจูุบ ูุงุฎุงูุต ุจู ุฌุง ุฎุงูุต (M-01)

* **ูุญู:** `_createCampaign` ุฏุฑ `DistributionCreator.sol`
* **ูุดฺฉู:** ุญุฏุงูู ูพุงุฏุงุด ุณุงุนุช ุจุฑ ุงุณุงุณ ูุจูุบ **ูุงุฎุงูุต** ูุจู ุงุฒ ฺฉุณุฑ ฺฉุงุฑูุฒุฏ ุงุนุชุจุงุฑุณูุฌ ูโุดูุฏุ ฺฉู ุจุงุนุซ ฺฉุงูุด ููุฏุงุฑ ูุงูุน ูพุฑุฏุงุฎุช ูโุดูุฏ.
* **ุงุซุฑ:** ฺฉููพูโูุง ููฺฉู ุงุณุช ุจูโุตูุฑุช ุตุญุญ ุฏุฑ ุฒูุฌุฑู ุธุงูุฑ ุดููุฏุ ุงูุง ฺฉูุชุฑ ุงุฒ ููุฏุงุฑ ูุนุฏู ุฏุงุฏูโุดุฏู ูพุฑุฏุงุฎุช ฺฉููุฏ.
* **ุฏุฑุณ ุขููุฎุชูโุดุฏู:** ุงุนุชุจุงุฑุณูุฌโูุง ุจุงุฏ ุจุฑ ุงุณุงุณ **ููุฏุงุฑ ฺฉู ฺฉุงุฑุจุฑ ูุงูุนุงู ุฏุฑุงูุช ูโฺฉูุฏ** ุงูุฌุงู ุดููุฏ.

### 2. ููุฏููฺฏ ูุงุฏุฑุณุช ุฎุทุง ุฏุฑ callback ุชุงุจุน `_claim` (M-02)

* **ูุญู:** `_claim` ุฏุฑ `Distributor.sol`
* **ูุดฺฉู:** ุงุณุชูุงุฏู ูุงุฏุฑุณุช ุงุฒ `try/catch`:

  * revertูุง callback ุฎุงุฑุฌ (`onClaim`) ุงฺฏุฑ catch ุฎุงู ุจุงุดุฏุ ูุงุฏุฏู ฺฏุฑูุชู ูโุดููุฏ.
  * ููุฏุงุฑ ุจุฑฺฏุดุช ูุงูุนุชุจุฑ ุจุงุนุซ revert **ุฏุงุฎู ุจููฺฉ try** ูโุดูุฏ ฺฉู catch ุขู ุฑุง ูุฏุฑุช ููโฺฉูุฏ.
* **ุงุซุฑ:** ฺฉ recipient ูุฎุฑุจ ุง buggy ูโุชูุงูุฏ:

  * ุจุงุนุซ **ุดฺฉุณุช ุตุงูุช** ู ูุงุฏุฏู ฺฏุฑูุชู ููุทู ูพุณ ุงุฒ claim ุดูุฏ.
  * **DoS** ุงุฌุงุฏ ฺฉูุฏ ู ฺฉู batch claim ุฑุง revert ฺฉูุฏ.
* **ุฏุฑุณ ุขููุฎุชูโุดุฏู:** `try/catch` ููุท ุฎุทุงูุง ูุงุด ุงุฒ external call ุฑุง ูโฺฏุฑุฏุ ูู ุฎุทุงูุง ุฏุงุฎู ุจููฺฉ try. ุงุณุชูุงุฏู ุงุฒ ุงูฺฏู ุงูู ุฒุฑ ุชูุตู ูโุดูุฏ:

```solidity
bool callbackOk;

try IClaimRecipient(recipient).onClaim(user, token, amount, data) returns (bytes32 ret) {
    callbackOk = (ret == EXPECTED_VALUE);
} catch {
    callbackOk = false;
}

if (!callbackOk) {
    // ููุฏู ุงูู ุฎุทุง
}
```

### 3. ุงุนุชุจุงุฑุณูุฌ override ฺูุฏูุฑุญููโุง ููุท ุจู ฺฉููพู ุงููู ูฺฏุงู ูโฺฉูุฏ (M-03)

* **ูุญู:** `overrideCampaign` ุฏุฑ `DistributionCreator.sol`
* **ูุดฺฉู:** ููุช ฺฉ ฺฉููพู ฺูุฏ ุจุงุฑ override ุดูุฏุ ุงุนุชุจุงุฑุณูุฌ ููฺูุงู ุจู **ฺฉููพู ุงุตู** ูฺฏุงู ูโฺฉูุฏ ู overrides ูุจู ุฑุง ูุงุฏุฏู ูโฺฏุฑุฏ.
* **ุงุซุฑ:** ุชููุง ุงููู override ูููู ุงุณุช ู overrideูุง ุจุนุฏ ุจุง ูุฌูุฏ ูุนุชุจุฑ ุจูุฏูุ rejected ูโุดููุฏ.
* **ุฏุฑุณ ุขููุฎุชูโุดุฏู:** ุงุนุชุจุงุฑุณูุฌ ุจุงุฏ ููุดู ุฑู **ุขุฎุฑู state ูุนุชุจุฑ** ุงุนูุงู ุดูุฏุ ูู ููุท state ุงููู. ูููููโุง ุงุฒ ุงุนุชุจุงุฑุณูุฌ ุงูู:

```solidity
Campaign memory effectiveCampaign = campaignOverrides[id].exists
    ? campaignOverrides[id]
    : campaignList[id];

require(newStart >= effectiveCampaign.startTimestamp, "Invalid start");
```

---

## ๐ ูฺฉุงุช ุขููุฒุด ู ุชูุตูโูุง

* **ุงุนุชุจุงุฑุณูุฌ ูููโุฌุงูุจู:** ูููุงุฑู ูพุณ ุงุฒ ุงุนูุงู ฺฉุงุฑูุฒุฏ ุง ุชุบุฑุงุช ูููุ ุฏูุจุงุฑู ุงุนุชุจุงุฑุณูุฌ ุงูุฌุงู ุฏูุฏ.
* **try/catch ุฏุฑ Solidity:** ููุดู ุชูฺฉฺฉ ฺฉูุฏ ฺฉู ุฎุทุง ุงุฒ external call ุขูุฏู ุง ุงุฒ ููุทู ุฏุงุฎู ุจููฺฉ try. ูุฏุฑุช failure ุจุงุฏ ูุงุถุญ ู deterministic ุจุงุดุฏ.
* **ุทุฑุงุญ ูุชุบุฑ ุจุฑุง override:** ููุช state ูุงุจู ุชุบุฑ ุงุณุชุ ุงุนุชุจุงุฑุณูุฌ ุจุงุฏ ุฑู ุขุฎุฑู state ุงุนูุงู ุดูุฏ.
* **Dispute ู Merkle tree:** ูฺฉุงูุฒู dispute ุจุงุฏ ูุณุฑูุง ุงูู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุณูุกุงุณุชูุงุฏู ฺฉุงุฑุจุฑุงู ุฏุฑ ุทูู ุจุงุฒู dispute ุฏุงุดุชู ุจุงุดุฏ.

---

## ๐ ููุงุจุน

* [ฺฏุฒุงุฑุด ุฑุณู Code4rena Merkl (Nov 2025)](https://code4rena.com/reports/2025-11-merkl)
